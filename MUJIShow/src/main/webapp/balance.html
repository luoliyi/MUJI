<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>无印良品</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />

		<!--图标-->
		<link rel="shortcut icon" href="//www.suning.com/favicon.ico" type="image/x-icon">
		<link rel="stylesheet" type="text/css" href="css/balance.css" />
		<link rel="stylesheet" type="text/css" href="js/layui/css/layui.css" />

		<style>
			body{
				font-family: "微软雅黑";
				font-weight: 340;
			}
		</style>
	</head>

	<body class="center">
		<div id="maxdiv">
			<!--容器-->
			<div id="maxdivcontainer">
				<!--地址-->
				<div class="section-address">
					<div class="section-address-label">收货地址</div>
					<!--详细-->
					<div class="section-address-detail"><p><span id="username">罗立一</span>　
						<span id="userphone">13926901506</span></p> 
						<p class="EcArea"><span >广东省珠海市 斗门区</span><span>>白蕉镇白蕉南路29号南方IT学院</span></p>
							<i class="layui-icon layui-icon-right chooseMoreAddress" title="选择更多地址"></i>  
					</div>
				</div>
				<!--购物车里面的内容-->
				<div class="PageCheckoutPartItems">

					<!--一件商品-->
					<div class="oneGoods" id="goodCont" style="display: none">
						<div class="image-wrap">
							<img src="img/goodsdetails/untitled.png" />
							<div class="image-wrap-right">
								<span class="title">棉水洗平纹衬衫</span><br />
								<div class="options">颜色：白色、尺码：男式175/100A</div>
								<span id="image-wrap-right-pricediv"><span>￥</span><span class="image-wrap-right-price">78</span></span>
								<!--数量-->
								<div class="quantity">数量：<span>x</span><span>1</span>
							</div>
						</div>
					</div>
			</div>
			
			<!--配送方式-->
			<div class="PageCheckoutPartTotal">
				<div class="section-address-label">配送方式</div>
				<div class="section-address-detail"><p><span id="kuaidi">快递</span>
					<span id="kuaditip">根据收货地区自动分配</span>
					<p class="EcArea"><span>运费</span><span id="kuadimoney"><span>￥</span>
					<span id="kuadimoneys">11</span></p>
				</div>
			</div>
			<!--支付方式-->
			<div class="section section-payment">
				<div class="section-address-label">支付方式</div>
					<span id="paytype">支付宝</span>
					<i class="layui-icon layui-icon-right chooseOtherPaytype" title="选择其他支付方式"></i> 
				</div>
			</div>
									
			<!--支付方式选择框-->
			<div id="payfordiv">
				<div class="heading">选择支付方式</div>
				<!--支付宝-->
				<div class="zhifubao">
					<img src="img/balance/zhifubaopay.png"  title="支付宝支付"/>
					<p class="payname">支付宝</p>
					<p class="brief">支付宝安全支付</p>
					<i id="zbfpay" class="layui-icon layui-icon-circle" data-type="支付宝"></i>  
				</div>
				<!--微信-->
				<div class="weixin">
					<img src="img/balance/wechatpay.jpg"  title="微信支付"/>
					<p class="payname">微信</p>
					<p class="brief">微信安全支付</p>
					<i id="weixinpay" class="layui-icon layui-icon-circle" data-type="微信"></i>  
				</div>
				<button type="button" id="muclose" class="mu-button">关闭</button>
			</div>
						
			<!--底部-->
			<div id="footbar-wrap">
				<!--选择框-->
				<div id="chooseAlltoCar"></div>
				<div class="PageCommodityDetailPartActions">
					<!--加入购物车-->
					<div class="part-actions-wrap">
						<div class="chooseSelectAll">
							<span id="countGoods">2</span><span>件商品</span>
							<!--总价-->
							<span class="allPrice">
								<span>合计</span><span>￥</span><span id="allPrice">156.00</span>
							</span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<button type="button" id="gotobuy" class="mu-button primary">去付款</button>
		<!--div遮罩层-->
		<div id="CoveringLayer"></div>
		<div id="qrcodebox">
			<!--二维码-->
			<div id="qrcode"></div>
			<p class="qrcodetype"></p>
			<div class="qrcodesuccess">
				<a id="qrcodesuccess" title="支付完成">我已经完成支付</a>
			</div>
		</div>

			<!--
				订单详情
			-->
			<div id="checkPay" style="display:none;">
				<div class="order-pending" style="font-style: normal;">
					<div class="order-pending-title">等待付款</div>
					<div class="order-pending-content"><!--剩余：39分15秒-->
						<input id="orderTime" type="hidden" name="countDown" data-prefix="剩余：	" value="" /><span></span>
					</div>
				</div>
				<!--地址-->
				<div class="order-address"><div class="order-address-label">收货地址</div>
					<div class="order-address-detail"><p>罗立一　13926901506</p>
						<p><span class="EcArea">广东省珠海市 斗门区</span> 白蕉镇白蕉南路29号南方IT学院</p>
					</div>
				</div>

				<div class="orderDetails" >
					<div class="oneDetails">
						<h3 class="orderNo"><span>订单号：</span>1234567789<span class="orderState">已完成</span></h3>
						<!--一條商品-->
						<div class="order-item-items-item">
							<img src="img/goodsdetails/untitled.png">
							<div class="order-item-heading-wrap">
								<div class="name">丝光斜纹棉布直筒裤<span class="count"><span>x</span><span class="orderCount">1</span></span></div>
								<div class="options">颜色：<span>"+obj1.goods.gcolor+" "+obj1.goods.gsize+"</span></div>
								<div class="price"><span>￥</span><span class="orderPrice">112.00</span></div>
							</div>
						</div>
						<!--一條商品-->
						<div class="order-item-items-item">
							<img src="img/goodsdetails/untitled.png">
							<div class="order-item-heading-wrap">
								<div class="name">丝光斜纹棉布直筒裤<span class="count"><span>x</span><span class="orderCount">1</span></span></div>
								<div class="options">颜色：深米色、尺码：女式155/58A</div>
								<div class="price"><span>￥</span><span class="orderPrice">112.00</span></div>
							</div>
						</div>
						<!--运费-->
						<div class="order-item-total">
							<div class="pay">合计(含运费)<h4 class="orderSumCount">
								<span>￥</span><span class="orderSumPrice">236.00</span></h4></div>
						</div>
						<!--按钮-->
						<div class="MuOrderItemActions">
							<a >删除订单</a>
							<a class="primary" id="gotobuy2">付款</a>
						</div>
					</div>
				</div>
				<button type="button" class="returnPrev">返回</button>
			</div>
			<!--
				收货地址操作
			-->
			<!--管理收货地址-->
			<div id="controlMyplace">
				<!--关闭按钮-->
				<div class="divClose">
					<i class="layui-icon layui-icon-close btnColse" title="返回我的信息"></i>
				</div>

				<!--我的信息-->
				<div class="placeitem">
					<!--姓名-->
					<div class="subject">
						罗立一
					</div>
					<!--主体-->
					<div class="placebody">
						<div class="palcelist">
							<label>联系方式：</label>
							<span>13926901506</span>
							<br />
							<label>详细地址：</label>
							<span>广东省珠海市白蕉镇白蕉南路29号南方IT学院</span>
						</div>
					</div>
					<!--设置-->
					<div class="placeactions">
							<span class="isdefault" title="设为默认">
								<i class="layui-icon layui-icon-circle"></i>
								<span>默认地址</span>
							</span>
						<!--删除-->
						<span class="isEdit">
								<i class="layui-icon layui-icon-delete"></i>
								<span title="删除" id="delMyPlace">删除</span>
							</span>
						<!--编辑 -->
						<span class="isEdit">
								<i class="layui-icon layui-icon-edit"></i>
								<span title="编辑" id="editMyPlace">编辑</span>
							</span>
					</div>
				</div>
				<!--这里插入新的地址-->

				<!--新增收货地址-->
				<div class="footbar-wrap">
					<div class="action-wrap">
						<button id="btnAddNewPlace" type="button" class="mu-button">新增收货地址</button>
					</div>
				</div>
			</div>

			<!--新增地址-->
			<div id="addAndEditPlace">
				<!--关闭按钮-->
				<div class="divClose">
					<i class="layui-icon layui-icon-close btnColse" title="返回我的信息"></i>
				</div>
				<!--填写-->
				<div class="list-group-wrap">
					<div class="MuListItem has-title has-content">
						<label>收货客人</label>
						<input type="text" placeholder="请输入收件人姓名" />
					</div>
					<div class="MuListItem has-title has-content">
						<label>联系电话</label>
						<input type="text" placeholder="请输入联系电话" />
					</div>
					<div class="MuListItem has-title has-content" style="position: relative;">
						<label>所在地区</label>
						<div class="info" style="position: absolute;top: 5px;left: 103px;">
							<select name="province" id="province">
								<option value="请选择">请选择</option>
							</select>
							<select name="city" id="city">
								<option value="请选择">请选择</option>
							</select>
							<select name="town" id="town">
								<option value="请选择">请选择</option>
							</select>
						</div>
					</div>
					<div class="MuListItem has-title has-content">
						<label class="mydetailplace">详细地址</label>
						<textarea placeholder="请输入详细地址，不少于5个字。"></textarea>
					</div>
				</div>
				<!--设为默认地址-->
				<div class="MuListItem has-title has-content">
					<div class="listitem-wrap" title="设为默认地址">
						<span>设为默认地址</span>
						<i id="checkDefaultPlace" class="layui-icon layui-icon-circle"></i>
					</div>
				</div>
				<!--保存-->
				<div class="footbar-wrap">
					<div class="action-wrap">
						<button id="btnSaveNewPlace" type="button" class="mu-button" title="保存">保存</button>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
	<script type="text/javascript" src="js/layui/layui.js"></script>
	<script type="text/javascript" src="js/balance.js"></script>
	<script type="text/javascript" src="js/qrcode.min.js"></script>
	<script type="text/javascript" src="js/area.js"></script>
	<script type="text/javascript" src="js/select.js"></script>
	<script src="jquerydjs/countDown.js"></script>
	<script>
		/*
		* 保存数据
		* */
		$(function () {
			/*
			* 窗体加载，先查询出购物车里面的商品
			* */
            var app={
                selectAllCartsByMphone(){
                    $.ajax({
                        url:"shoppingCarController/selectAllCartsByMphone",
                        contentType:"application/json;charset=utf-8",
                        type:"post"
                    }).done(function (jsdata) {
                        $("#countGoods").html(jsdata.length)
                        app.renderData(jsdata);
                    })
                },

                /*
                * 渲染数据
                * */
                renderData:function(jsdata){
                    //$(".PageCheckoutPartItems .oneGoods").remove();
					console.log(jsdata)
                    var sumprice=0;
                    $.each(jsdata,function (index,obj) {
                        sumprice+=obj.sumprice;
                        /*
                        * 添加数据
                        * */
                        $(
							"<div class=\"oneGoods\">\n" +
							"<div class=\"image-wrap\">\n" +
							"<img src='admin/img/goodsdetails/" + obj.goods.gname + ".jpg'/>\n" +
							"<div class=\"image-wrap-right\">\n" +
							"<span class=\"title\">"+obj.goods.gname+"</span><br />\n" +
							"<div class=\"options\">颜色：白色、尺码：男式175/100A</div>\n" +
							"<span class=\"image-wrap-right-pricediv\"><span>￥</span><span class=\"image-wrap-right-price\">"+obj.goods.gnowprice+"</span></span>\n" +
							"<div class=\"quantity\">数量：<span>x</span><span>"+obj.sccount+"</span>\n" +
							"</div>\n" +
							"</div>\n" +
							"</div>"
						).insertBefore($("#goodCont"));
                    });
                    $("#allPrice").html(sumprice+parseInt($("#kuadimoneys").html())+".00");
                },
                init(){
                    app.selectAllCartsByMphone();
                }
            };
            app.init();

        })
	</script>
</html>